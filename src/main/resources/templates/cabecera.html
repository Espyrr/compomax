<div th:fragment="cabecera">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
		referrerpolicy="no-referrer" />
	<style>
		body {
			margin: 0;
			font-family: Arial, sans-serif;
		}

		.header {
			display: flex;
			align-items: center;
			justify-content: space-between;
			background-color: #000;
			padding: 10px 20px;
			color: white;
		}

		.header .user-actions {
			display: flex;
			align-items: center;
			gap: 15px;
		}

		.welcome-text {
			font-weight: bold;
			font-size: 16px;
			color: white;
		}

		.logout-button,
		.login-button {
			background-color: transparent;
			color: white;
			border: 1px solid white;
			padding: 6px 12px;
			border-radius: 4px;
			cursor: pointer;
			transition: background-color 0.3s, color 0.3s;
		}

		.logout-button:hover,
		.login-button:hover {
			background-color: red;
			border-color: red;
		}

		.cart-container {
			display: flex;
			align-items: center;
			gap: 10px;
		}

		.cart-icon {
			font-size: 30px;
			color: white;
			position: relative;
			margin-right: 15px;
		}

		.cart-icon sup {
			position: absolute;
			top: -5px;
			right: -10px;
			background-color: red;
			color: white;
			font-size: 12px;
			font-weight: bold;
			padding: 4px 6px;
			border-radius: 50%;
			border: 1px solid white;
			line-height: 1;
		}

		.logo {
			display: flex;
			align-items: center;
		}

		.logo img {
			height: 75px;
			margin-right: -5%;
			margin-left: 65px;
			object-fit: contain;
		}

		.search-bar {
			flex-grow: 1;
			max-width: 500px;
			margin: 0 20px;
			display: flex;
			align-items: center;
		}

		.search-bar input {
			width: 100%;
			padding: 8px;
			border: none;
			border-radius: 4px 0 0 4px;
			outline: none;
			font-size: 14px;
			color: gray;
		}

		.search-bar input::placeholder {
			font-size: 14px;
			color: gray;
		}

		.search-bar button {
			padding: 8px 12px;
			background-color: blue;
			color: white;
			border: none;
			border-radius: 0 4px 4px 0;
			cursor: pointer;
		}

		.currency-switch select {
			padding: 6px;
		}
	</style>

	<div class="header">
		<div class="logo">
			<a th:href="@{/}">
				<img th:src="@{/img/logotipo.jpg}" alt="CompoMax">
			</a>
		</div>

		<div class="search-bar">
			<form th:action="@{/catalogo}" method="get" style="display: flex; width: 100%;">
				<input type="text" name="buscar" placeholder="Búsqueda en catálogo" th:value="${buscar}">
				<button type="submit">
					<i class="fas fa-search"></i>
				</button>
			</form>
		</div>

		<div class="user-actions" style="display: flex; align-items: center; gap: 50px;">
			<div class="d-flex align-items-center gap-3">
				<div th:if="${session.usuarioLogueado != null}" class="d-flex align-items-center gap-3">
					<div class="currency-switch">
						<form th:action="@{/productos/cambiar-moneda}" method="post">
							<select name="moneda" onchange="this.form.submit()"
									class="form-select form-select-sm bg-dark text-white border-white">
								<option value="PEN" th:selected="${session.moneda == 'PEN'}">S/ PEN</option>
								<option value="USD" th:selected="${session.moneda == 'USD'}">$ USD</option>
							</select>
						</form>
					</div>

					<span class="welcome-text">
						Bienvenid@&nbsp;<span th:text="${session.usuarioLogueado.nombre}"></span>
					</span>

					<form th:action="@{/usuario/logout}" method="get" style="margin: 0;">
						<button type="submit" class="logout-button">Cerrar sesión</button>
					</form>
				</div>

				<div th:if="${session.usuarioLogueado == null}" class="d-flex align-items-center gap-3">
					<div class="currency-switch">
						<form th:action="@{/productos/cambiar-moneda}" method="post">
							<select name="moneda" onchange="this.form.submit()"
									class="form-select form-select-sm bg-dark text-white border-white">
								<option value="PEN" th:selected="${session.moneda == 'PEN'}">S/ PEN</option>
								<option value="USD" th:selected="${session.moneda == 'USD'}">$ USD</option>
							</select>
						</form>
					</div>

					<a th:href="@{/usuario/login}">
						<button class="login-button">Iniciar sesión</button>
					</a>
				</div>
			</div>

			<div class="cart-container">
				<a th:href="@{/carrito}" class="cart-icon">
					<i class="fa-solid fa-cart-shopping"></i>
					<sup th:text="${session.cantArticulos}">0</sup>
				</a>
			</div>
		</div>
	</div>
</div>
